{"version":3,"sources":["faq.js","filter.js","menu.js","modal-filter.js","modal.js","slider.js","utils.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["// аккордеон для блока FAQ\n\n(function () {\n  let faqList = document.querySelector('.faq__list');\n\n  if (faqList) {\n    faqList.classList.remove('faq__list--nojs');\n\n    let toggleFaqItem = function (item) {\n      item.classList.toggle('faq__item--open');\n    };\n\n    faqList.addEventListener('click', (evt) => {\n      let faqItem = evt.target.closest('li');\n      toggleFaqItem(faqItem);\n    });\n  }\n\n})();\n","// аккордеон для фильтра\n\n(function () {\n\n  let filter = document.querySelector('.filter');\n  let filterButtons = document.querySelectorAll('.filter__item > button');\n\n  if (filter && filterButtons) {\n\n    filter.classList.remove('filter--nojs');\n\n    for (let i = 0; i < filterButtons.length; i++) {\n      filterButtons[i].addEventListener('click', (evt) => {\n        evt.target.parentNode.classList.toggle('filter__item--open');\n      });\n    }\n  }\n\n})();\n","// мобильное меню - начиная с планшетной версии\n\n(function () {\n  let pageHeader = document.querySelector('.page-header');\n  let headerToggle = document.querySelector('.page-header__toggle');\n\n  if (pageHeader && headerToggle) {\n    pageHeader.classList.remove('page-header--nojs');\n\n    headerToggle.addEventListener('click', () => {\n      if (pageHeader.classList.contains('page-header--closed')) {\n        pageHeader.classList.remove('page-header--closed');\n        pageHeader.classList.add('page-header--opened');\n      } else {\n        pageHeader.classList.add('page-header--closed');\n        pageHeader.classList.remove('page-header--opened');\n      }\n    });\n  }\n\n})();\n","","// модальные окна\n\n(function () {\n\n  let modalLoginOpen = document.querySelector('.modal-open--login');\n  let modalLogin = document.querySelector('.modal--login');\n  let modalLoginClose = document.querySelector('.modal__close--login');\n  let loginForm = document.querySelector('.login__form');\n\n  let modalFilterOpen = document.querySelector('.catalog__filter-button');\n  let modalFilter = document.querySelector('.filter');\n  let modalFilterClose = document.querySelector('.filter__modal-close');\n\n  let body = document.querySelector('body');\n\n  let email = document.querySelector('[id=email]');\n\n  let isStorage = true;\n  let emailStorage = '';\n\n  try {\n    emailStorage = localStorage.getItem('emailStorage');\n  } catch (err) {\n    isStorage = false;\n  }\n\n  let escapeClickHandler = function (evt) {\n    if (evt.key === window.utils.KeyCode.ESCAPE) {\n      evt.preventDefault();\n      // eslint-disable-next-line no-use-before-define\n      setVisible(false);\n    }\n  };\n\n  let setVisible = function (visible) {\n    if (visible) {\n      body.classList.add('overlay--open');\n      document.addEventListener('keydown', escapeClickHandler);\n    } else {\n      body.classList.remove('overlay--open');\n      document.querySelector('.modal-show').classList.remove('modal-show');\n      document.querySelector('.overlay').remove();\n      document.removeEventListener('keydowm', escapeClickHandler);\n\n      if (modalFilter && modalFilterClose) {\n        modalFilter.classList.remove('filter--modal-open');\n      }\n    }\n  };\n\n  let createOverlay = function () {\n    let overlay = document.createElement('div');\n    overlay.classList.add('overlay');\n    body.appendChild(overlay);\n\n    overlay.addEventListener('click', (overlayEvt) => {\n      if (overlayEvt.target === overlay) {\n        setVisible(false);\n      }\n    });\n  };\n\n  let modalOpenHandler = function (modal) {\n    modal.classList.add('modal-show');\n    createOverlay();\n    setVisible(true);\n  };\n\n  let modalCloseHandler = function (evt) {\n    evt.preventDefault();\n    setVisible(false);\n  };\n\n  if (modalLoginOpen && modalLogin) {\n    modalLoginOpen.addEventListener('click', (evt) => {\n      evt.preventDefault();\n      modalOpenHandler(modalLogin);\n      email.focus();\n\n      if (emailStorage) {\n        email.value = emailStorage;\n      }\n    });\n  }\n\n  if (modalLoginClose) {\n    modalLoginClose.addEventListener('click', modalCloseHandler);\n  }\n\n  if (loginForm) {\n    loginForm.addEventListener('submit', (evt) => {\n      if (!email.value) {\n        evt.preventDefault();\n      } else {\n        if (isStorage) {\n          localStorage.setItem('emailStorage', email.value);\n        }\n      }\n    });\n  }\n\n  if (modalFilterOpen && modalFilter) {\n    modalFilterOpen.addEventListener('click', (evt) => {\n      evt.preventDefault();\n      modalOpenHandler(modalFilter);\n      modalFilter.classList.add('filter--modal-open');\n    });\n  }\n\n  if (modalFilterClose) {\n    modalFilterClose.addEventListener('click', modalCloseHandler);\n  }\n\n})();\n","// слайдер\n\n(function () {\n\n  let PictureCount = {\n    DESKTOP: 4,\n    TABLET: 2,\n  };\n\n  let mobile = window.matchMedia('(max-width: 767px)');\n  let tablet = window.matchMedia('(max-width: 1023px)');\n\n  let list = document.querySelector('.slider__list');\n  let items = document.querySelectorAll('.slider__item');\n  let buttonLeft = document.querySelector('.slider__button--left');\n  let buttonRight = document.querySelector('.slider__button--right');\n\n  let wrapperWidth; // вычисляемая под конкретное разрешение ширина контейнера\n  let itemWidth; // вычисляемая под конкретное разрешение ширина 1 слайда\n\n  let positionLeftItem = 0;\n  // eslint-disable-next-line no-unused-vars\n  let transform = 0;\n\n  let step; // шаг\n  let itemsArray = [];\n\n  let startX = 0; // для мобильного тача - начало перемещения\n\n  if (items) {\n    items.forEach((item, index) => {\n      itemsArray.push({item: item, position: index, transform: 0});\n    });\n  }\n\n  let position = {\n    getMin: 0,\n    getMax: itemsArray.length - 1,\n  };\n\n  let count; // временная переменная для определения количества изображений на адаптиве\n\n  let changeSizeHandler = function (evt) {\n\n    if (evt.matches) {\n      count = PictureCount.TABLET;\n    } else {\n      count = PictureCount.DESKTOP;\n    }\n\n    if (list && items) {\n      wrapperWidth = parseFloat(getComputedStyle(list).width);\n      itemWidth = parseFloat(getComputedStyle(items[0]).width);\n\n      step = itemWidth / wrapperWidth * 100;\n\n      positionLeftItem = 0;\n      transform = 0;\n      list.style.transform = 'translateX(, &{transform}!%)';\n    }\n  };\n\n  let buttonRightClickHandler = function () {\n    if (positionLeftItem + count >= position.getMax) {\n      return;\n    }\n\n    positionLeftItem = positionLeftItem + count;\n\n    transform -= step * count;\n    list.style.transform = 'translateX(, &{transform}%)';\n  };\n\n  let setMobileTouch = function () {\n    if (list) {\n      list.addEventListener('touchstart', (evt) => {\n        startX = evt.changedTouches[0].clientX;\n      });\n\n      list.addEventListener('touchend', (evt) => {\n        let endX = evt.changedTouches[0].clientX;\n        let deltaX = endX - startX;\n\n        if (deltaX > 50) {\n          buttonRightClickHandler();\n        } else if (deltaX < -50) {\n          // eslint-disable-next-line no-use-before-define\n          buttonLeftClickHandler();\n        }\n      });\n    }\n  };\n\n  let setMobileHandler = function (evt) {\n    if (evt.matches) {\n      setMobileTouch();\n    }\n  };\n\n  let buttonLeftClickHandler = function () {\n    if (positionLeftItem <= position.getMin) {\n      return;\n    }\n\n    positionLeftItem = positionLeftItem - count;\n    transform += step * count;\n\n    list.style.transform = 'translateX(, &{transform}%)';\n  };\n\n  if (buttonLeft && buttonRight) {\n    buttonRight.addEventListener('click', buttonRightClickHandler);\n    buttonLeft.addEventListener('click', buttonLeftClickHandler);\n  }\n\n  tablet.addListener(changeSizeHandler);\n  changeSizeHandler(tablet);\n\n  mobile.addListener(setMobileHandler);\n  setMobileHandler(mobile);\n\n})();\n","// утилитарный модуль - экспортирует общие функции и переменные для всех модулей\n\n(function () {\n\n  window.utils = {\n    KeyCode: {\n      BACKSPACE: 'Backspace',\n      ESCAPE: 'Escape',\n    }\n  };\n\n})();\n"]}