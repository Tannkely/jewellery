{"version":3,"sources":["faq.js","filter.js","menu.js","modal.js","slider.js","tabs.js","utils.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n// аккордеон для блока FAQ\n\n(function () {\n  var faqList = document.querySelector('.faq__list');\n\n  if (faqList) {\n    faqList.classList.remove('faq__list--nojs');\n\n    var toggleFaqItem = function (item) {\n      item.classList.toggle('faq__item--open');\n    };\n\n    faqList.addEventListener('click', function (evt) {\n      var faqItem = evt.target.closest('li');\n      toggleFaqItem(faqItem);\n    });\n  }\n\n})();\n","'use strict';\n\n// аккордеон для фильтра\n\n(function () {\n\n  var filter = document.querySelector('.filter');\n  var filterButtons = document.querySelectorAll('.filter__item > button');\n\n  if (filter && filterButtons) {\n\n    filter.classList.remove('filter--nojs');\n\n    for (var i = 0; i < filterButtons.length; i++) {\n      filterButtons[i].addEventListener('click', function (evt) {\n        evt.target.parentNode.classList.toggle('filter__item--open');\n      });\n    }\n  }\n\n})();\n","'use strict';\n\n// мобильное меню - начиная с планшетной версии\n\n(function () {\n  var pageHeader = document.querySelector('.page-header');\n  var headerToggle = document.querySelector('.page-header__toggle');\n\n  if (pageHeader && headerToggle) {\n    pageHeader.classList.remove('page-header--nojs');\n\n    headerToggle.addEventListener('click', function () {\n      if (pageHeader.classList.contains('page-header--closed')) {\n        pageHeader.classList.remove('page-header--closed');\n        pageHeader.classList.add('page-header--opened');\n      } else {\n        pageHeader.classList.add('page-header--closed');\n        pageHeader.classList.remove('page-header--opened');\n      }\n    });\n  }\n\n})();\n","'use strict';\n\n// модальные окна\n\n(function () {\n\n  var modalLoginOpen = document.querySelector('.modal-open--login');\n  var modalLogin = document.querySelector('.modal--login');\n  var modalLoginClose = document.querySelector('.modal__close--login');\n  var loginForm = document.querySelector('.login__form');\n\n  var modalBasketOpen = document.querySelectorAll('.modal-open--basket');\n  var modalBasket = document.querySelector('.modal--basket');\n  var modalBasketClose = document.querySelector('.modal__close--basket');\n\n  var modalFilterOpen = document.querySelector('.catalog__filter-button');\n  var modalFilter = document.querySelector('.filter');\n  var modalFilterClose = document.querySelector('.filter__modal-close');\n\n  var body = document.querySelector('body');\n\n  var email = document.querySelector('[id=email]');\n\n  var isStorage = true;\n  var emailStorage = '';\n\n  try {\n    emailStorage = localStorage.getItem('emailStorage');\n  } catch (err) {\n    isStorage = false;\n  }\n\n  var setVisible = function (visible) {\n    if (visible) {\n      body.classList.add('overlay--open');\n      document.addEventListener('keydown', escapeClickHandler);\n    } else {\n      body.classList.remove('overlay--open');\n      document.querySelector('.modal-show').classList.remove('modal-show');\n      document.querySelector('.overlay').remove();\n      document.removeEventListener('keydowm', escapeClickHandler);\n\n      if (modalFilter && modalFilterClose) {\n        modalFilter.classList.remove('filter--modal-open');\n      }\n    }\n  };\n\n  var escapeClickHandler = function (evt) {\n    if (evt.key === window.utils.KeyCode.ESCAPE) {\n      evt.preventDefault();\n      setVisible(false);\n    }\n  };\n\n  var createOverlay = function () {\n    var overlay = document.createElement('div');\n    overlay.classList.add('overlay');\n    body.appendChild(overlay);\n\n    overlay.addEventListener('click', function (overlayEvt) {\n      if (overlayEvt.target === overlay) {\n        setVisible(false);\n      }\n    });\n  };\n\n  var modalOpenHandler = function (modal) {\n    modal.classList.add('modal-show');\n    createOverlay();\n    setVisible(true);\n  };\n\n  var modalCloseHandler = function (evt) {\n    evt.preventDefault();\n    setVisible(false);\n  };\n\n  if (modalLoginOpen && modalLogin) {\n    modalLoginOpen.addEventListener('click', function (evt) {\n      evt.preventDefault();\n      modalOpenHandler(modalLogin);\n      email.focus();\n\n      if (emailStorage) {\n        email.value = emailStorage;\n      }\n    });\n  }\n\n  if (modalLoginClose) {\n    modalLoginClose.addEventListener('click', modalCloseHandler);\n  }\n\n  if (loginForm) {\n    loginForm.addEventListener('submit', function (evt) {\n      if (!email.value) {\n        evt.preventDefault();\n      } else {\n        if (isStorage) {\n          localStorage.setItem('emailStorage', email.value);\n        }\n      }\n    });\n  }\n\n  if (modalBasketOpen && modalBasket) {\n    for (var i = 0; i < modalBasketOpen.length; i++) {\n      modalBasketOpen[i].addEventListener('click', function (evt) {\n        evt.preventDefault();\n        modalOpenHandler(modalBasket);\n      });\n    }\n  }\n\n  if (modalBasketClose) {\n    modalBasketClose.addEventListener('click', modalCloseHandler);\n  }\n\n  if (modalFilterOpen && modalFilter) {\n    modalFilterOpen.addEventListener('click', function (evt) {\n      evt.preventDefault();\n      modalOpenHandler(modalFilter);\n      modalFilter.classList.add('filter--modal-open');\n    });\n  }\n\n  if (modalFilterClose) {\n    modalFilterClose.addEventListener('click', modalCloseHandler);\n  }\n\n})();\n","'use strict';\n\n// слайдер\n\n(function () {\n\n  var PictureCount = {\n    DESKTOP: 4,\n    TABLET: 2,\n  };\n\n  var mobile = window.matchMedia('(max-width: 767px)');\n  var tablet = window.matchMedia('(max-width: 1023px)');\n\n  var list = document.querySelector('.slider__list');\n  var items = document.querySelectorAll('.slider__item');\n  var buttonLeft = document.querySelector('.slider__button--left');\n  var buttonRight = document.querySelector('.slider__button--right');\n\n  var wrapperWidth; // вычисляемая под конкретное разрешение ширина контейнера\n  var itemWidth; // вычисляемая под конкретное разрешение ширина 1 слайда\n\n  var positionLeftItem = 0;\n  var transform = 0;\n\n  var step; // шаг\n  var itemsArray = [];\n\n  var startX = 0; // для мобильного тача - начало перемещения\n\n  if (items) {\n    items.forEach(function (item, index) {\n      itemsArray.push({item: item, position: index, transform: 0});\n    });\n  }\n\n  var position = {\n    getMin: 0,\n    getMax: itemsArray.length - 1,\n  };\n\n  var count; // временная переменная для определения количества изображений на адаптиве\n\n  var changeSizeHandler = function (evt) {\n\n    if (evt.matches) {\n      count = PictureCount.TABLET;\n    } else {\n      count = PictureCount.DESKTOP;\n    }\n\n    if (list && items) {\n      wrapperWidth = parseFloat(getComputedStyle(list).width);\n      itemWidth = parseFloat(getComputedStyle(items[0]).width);\n\n      step = itemWidth / wrapperWidth * 100;\n\n      positionLeftItem = 0;\n      transform = 0;\n      list.style.transform = 'translateX(' + transform + '%)';\n    }\n  };\n\n  var setMobileHandler = function (evt) {\n    if (evt.matches) {\n      setMobileTouch();\n    }\n  };\n\n  var buttonRightClickHandler = function () {\n    if (positionLeftItem + count >= position.getMax) {\n      return;\n    }\n\n    positionLeftItem = positionLeftItem + count;\n\n    transform -= step * count;\n    list.style.transform = 'translateX(' + transform + '%)';\n  };\n\n  var buttonLeftClickHandler = function () {\n    if (positionLeftItem <= position.getMin) {\n      return;\n    }\n\n    positionLeftItem = positionLeftItem - count;\n    transform += step * count;\n\n    list.style.transform = 'translateX(' + transform + '%)';\n  };\n\n  var setMobileTouch = function () {\n    if (list) {\n      list.addEventListener('touchstart', function (evt) {\n        startX = evt.changedTouches[0].clientX;\n      });\n\n      list.addEventListener('touchend', function (evt) {\n        var endX = evt.changedTouches[0].clientX;\n        var deltaX = endX - startX;\n\n        if (deltaX > 50) {\n          buttonRightClickHandler();\n        } else if (deltaX < -50) {\n          buttonLeftClickHandler();\n        }\n      });\n    }\n  };\n\n  if (buttonLeft && buttonRight) {\n    buttonRight.addEventListener('click', buttonRightClickHandler);\n    buttonLeft.addEventListener('click', buttonLeftClickHandler);\n  }\n\n  tablet.addListener(changeSizeHandler);\n  changeSizeHandler(tablet);\n\n  mobile.addListener(setMobileHandler);\n  setMobileHandler(mobile);\n\n})();\n","'use strict';\n\n// табы для карточки товара\n\n(function () {\n\n  var tabLinks = document.querySelectorAll('.card__tabs-menu label');\n  var tabItems = document.querySelectorAll('.card__tabs-item');\n\n  var linksArray = Array.from(tabLinks);\n\n  if (linksArray && tabItems) {\n\n    for (var i = 0; i < linksArray.length; i++) {\n      linksArray[i].addEventListener('click', function (evt) {\n\n        for (var j = 0; j < tabItems.length; j++) {\n          tabItems[j].classList.remove('card__tabs-item--active');\n        }\n\n        var index = linksArray.indexOf(evt.target);\n\n        tabItems[index].classList.add('card__tabs-item--active');\n      });\n    }\n\n  }\n\n})();\n","'use strict';\n\n// утилитарный модуль - экспортирует общие функции и переменные для всех модулей\n\n(function () {\n\n  window.utils = {\n    KeyCode: {\n      BACKSPACE: 'Backspace',\n      ESCAPE: 'Escape',\n    }\n  };\n\n})();\n"]}